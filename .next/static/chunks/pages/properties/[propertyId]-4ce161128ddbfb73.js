(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6],{309:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/properties/[propertyId]",function(){return s(8816)}])},1129:function(e,r,s){"use strict";s.d(r,{Z:function(){return S}});var t=s(5893),a=s(7294),l=s(1664),i=s.n(l),n=s(9603),c=s(9417);let d=(e,r,s)=>(0,t.jsx)(i(),{href:r+s,className:"border-b-2 border-black hover:text-blue-600 hover:border-blue-600",children:e}),o=e=>"00/00/00"===e?"":e,x=e=>(0,t.jsx)("a",{className:"border-b-2 border-black hover:text-blue-600 hover:border-blue-600",href:"https://"+e,target:"_blank",rel:"noreferrer",children:e}),h=e=>1===e?(0,t.jsx)("div",{children:"✔"}):(0,t.jsx)("div",{children:"❌"}),m=e=>1===e?(0,t.jsx)("div",{children:"✔"}):null,u=e=>{switch(e){case 4:return"Admin";case 3:return"Manager";case 2:return"Engineer";default:return"Staff"}},f=(e,r)=>0===e?(0,t.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,t.jsx)(n.G,{icon:c.g82,className:"mr-1 w-5 text-red-600"})," ",e]}):0===r||e/r>1?(0,t.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,t.jsx)(n.G,{icon:c.LEp,className:"mr-1 w-5 text-green-500"})," ",e]}):(0,t.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,t.jsx)(n.G,{icon:c.ik8,className:"mr-1 w-5 text-yellow-500"})," ",e]}),b=(e,r,s,a)=>{if(a)return(0,t.jsx)("div",{className:"flex flex-row justify-center items-center hover:cursor-pointer select-none",onClick:()=>a(e,r,s),children:(0,t.jsx)(n.G,{icon:c.Yai,className:"mr-1 w-5"})})},j=(e,r,s)=>{if(e.length<5){let a=e.map(e=>(0,t.jsx)("li",{children:e.part_no+" / "+e.name+" / Quantity: "+e.quantity},"contentsItem"+e.spare_id));return(0,t.jsx)("ul",{children:a})}if(s)return(0,t.jsx)("button",{onClick:()=>s(e,r),children:"\uD83D\uDD0D"})},p=(e,r,s)=>{if(s)return(0,t.jsx)("div",{className:"flex flex-row justify-center items-center hover:cursor-pointer select-none",onClick:()=>s(e,r),children:(0,t.jsx)(n.G,{icon:c.Yai,className:"mr-1 w-5"})})},N=(e,r,s,a)=>a&&1!=s?(0,t.jsx)("div",{className:"flex flex-row justify-center items-center hover:cursor-pointer select-none",onClick:()=>a(e,r),children:(0,t.jsx)(n.G,{icon:c.Yai,className:"mr-1 w-5"})}):void 0,w=(e,r,s)=>{if(s)return(0,t.jsx)("div",{className:"flex flex-row justify-center items-center hover:cursor-pointer select-none",onClick:()=>s(e,r),children:(0,t.jsx)(n.G,{icon:c.g82,className:"mr-1 w-5 text-red-600"})})},v=(e,r,s,a)=>a&&1!=s?(0,t.jsx)("div",{className:"flex flex-row justify-center items-center hover:cursor-pointer select-none",onClick:()=>a(e,r),children:(0,t.jsx)(n.G,{icon:c.g82,className:"mr-1 w-5 text-red-600"})}):void 0;var g=s(3052);let y=e=>{let r=e=>e.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id+"_searchOption")),s=r=>{e.setSearchType(r.target.value),e.setSearchTerm("")};return(()=>{let a=e.headers.filter(e=>!0===e.search);return(0,t.jsxs)("div",{className:"flex flex-col w-max my-4 ml-10 rounded-sm",children:[(0,t.jsx)("select",{className:"mb-2",value:""!=e.searchType?e.searchType:a[0].name,onChange:s,children:r(a)}),(0,t.jsx)("input",{className:"bg-blue-200 rounded-sm",value:e.searchTerm,onChange:r=>e.setSearchTerm(r.target.value)})]})})()},k=e=>{let r=e.data,[s,l]=(0,a.useState)(),[i,n]=(0,a.useState)(),[c,k]=(0,a.useState)({col:e.config.headers[0].id,dir:"DSC"}),[S,C]=(0,a.useState)(""),[P,_]=(0,a.useState)(""),[T,D]=(0,a.useState)(!0);(0,a.useEffect)(()=>{G(c.col,c.dir)},[]),(0,a.useEffect)(()=>{E()},[P]),(0,a.useEffect)(()=>{G(c.col,c.dir)},[s]);let E=()=>{if(P.length>0){let e=r.filter(e=>e[S].toUpperCase().includes(P.toUpperCase()));l(e)}else l(r)},I=e=>{e===c.col?"DSC"===c.dir?(k({col:c.col,dir:"ASC"}),G(c.col,"ASC")):(k({col:c.col,dir:"DSC"}),G(c.col,"DSC")):(k({col:e,dir:"DSC"}),G(e,"DSC"))},G=(r,t)=>{let a=s||e.data;a.length>0&&("DSC"===t?a.sort((e,s)=>s[r]>e[r]?1:s[r]<e[r]?-1:0):a.sort((e,s)=>e[r]>s[r]?1:e[r]<s[r]?-1:0)),n(a),D(!1)},A=e.config.headers.map(e=>e.order?(0,t.jsx)("th",{className:"border-2 border-solid border-gray-500 px-2 cursor-pointer select-none",onClick:()=>I(e.id),children:(0,t.jsxs)("div",{className:" flex flex-row justify-center items-center",children:[e.name,c.col!=e.id?null:"ASC"===c.dir?(0,t.jsx)("div",{className:"ml-2 text-2xl",children:"↓"}):(0,t.jsx)("div",{className:"ml-2 text-2xl",children:"↑"})]})},"head."+e.id):(0,t.jsx)("th",{className:"border-2 border-solid border-gray-500 px-2 select-none",children:e.name},"head."+e.id)),F=r=>{let s=e.config.headers.map(s=>{let a=null;switch(s.type){case"string":default:a=r[s.id];break;case"link":a=d(r[s.id],e.config.linkColPrefix,r[s.id]);break;case"linkWithName":a=d(r[s.nameParam],e.config.linkColPrefix,r[s.id]);break;case"url":a=x(r[s.id]);break;case"date":a=o(r[s.id]);break;case"authSwitch":a=u(r[s.id]);break;case"completed":a=h(r[s.id]);break;case"arrived":a=m(r[s.id]);break;case"contents":a=j(r[s.id],r[s.functionNamePointer],e.viewTooManyItems);break;case"remaining_stock":a=f(r[s.id],r[s.avgUsagePointer]);break;case"adjust_stock":a=b(r[s.functionIdPointer],r[s.functionNamePointer],r[s.quantRemainPonter],e.adjustStockFunction);break;case"edit":a=p(r[s.functionIdPointer],r[s.functionNamePointer],e.editFunction);break;case"editWithHide":a=N(r[s.functionIdPointer],r[s.functionNamePointer],r[s.hidePointer],e.editFunction);break;case"delete":a=w(r[s.functionIdPointer],r[s.functionNamePointer],e.deleteFunction);break;case"deleteWithHide":a=v(r[s.functionIdPointer],r[s.functionNamePointer],r[s.hidePointer],e.deleteFunction)}return(0,t.jsx)("td",{className:"border border-solid border-gray-500 px-2 text-center p-2",children:a},"cell."+s.id)});return s};return(0,t.jsx)("div",{children:T?(0,t.jsx)(g.Z,{}):(0,t.jsxs)(t.Fragment,{children:[e.config.searchable&&e.config.headers.length>0?(0,t.jsx)(y,{headers:e.config.headers,searchType:S,searchTerm:P,setSearchType:C,setSearchTerm:_}):null,(0,t.jsxs)("table",{className:"min-w-full table-auto border-collapse border-2 border-solid border-gray-500 ",children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{className:"bg-gray-200",children:A})}),(0,t.jsx)("tbody",{children:(()=>{if(i&&(null==i?void 0:i.length)>0){let r=i.map(r=>(0,t.jsx)("tr",{children:F(r)},"body"+r[e.config.headers[0].id]));return r}})()})]})]})})};var S=k},8816:function(e,r,s){"use strict";s.r(r);var t=s(5893),a=s(6154),l=s(7294),i=s(1163),n=s(3052),c=s(2879),d=s(1819),o=s(1664),x=s.n(o),h=s(9603),m=s(9417),u=s(1129);let f={headers:[{id:"username",name:"Username",type:"string",search:!0,order:!0},{id:"first_name",name:"First Name",type:"string",search:!0,order:!0},{id:"last_name",name:"Surname",type:"string",search:!0,order:!0},{id:"authority",name:"Authority",type:"authSwitch",search:!0,order:!0}],searchable:!0},b=()=>{let[e,r]=(0,l.useState)(!0),[s,o]=(0,l.useState)(!1),[b,j]=(0,l.useState)(!1),p=(0,i.useRouter)(),[N,w]=(0,l.useState)([]),[v,g]=(0,l.useState)(!1),[y,k]=(0,l.useState)(""),[S,C]=(0,l.useState)([]);(0,l.useEffect)(()=>{r(!0),j(!1),o(!1),P(),_()},[]);let P=async()=>{try{let e=await a.Z.get("http://localhost:3001/properties/".concat(p.asPath.split("/")[2]),{headers:{Authorisation:"Bearer "+localStorage.getItem("token")}});0===e.data.length?o(!0):w(e.data),r(!1)}catch(s){j(!0),r(!1)}},_=async()=>{try{let e=await a.Z.get("http://localhost:3001/properties/assigned-users/".concat(p.asPath.split("/")[2]),{headers:{Authorisation:"Bearer "+localStorage.getItem("token")}});0===e.data.length?o(!0):C(e.data),r(!1)}catch(s){j(!0),r(!1)}},T=N.map(e=>(0,t.jsxs)("div",{className:"ml-10 mb-4 w-4/5 max-w-lg",children:[(0,t.jsxs)("div",{className:"flex flex-row h-6 mb-3",children:[(0,t.jsx)("div",{className:"w-1/2 pl-1 border-b-2",children:"ID Number: "}),(0,t.jsx)("div",{className:"w-1/2 border-b-2 flex flex-row justify-center",children:e.id})]}),(0,t.jsxs)("div",{className:"flex flex-row h-6 mb-3",children:[(0,t.jsx)("div",{className:"w-1/2 pl-1 border-b-2",children:"Name: "}),(0,t.jsx)("div",{className:"w-1/2 border-b-2 flex flex-row justify-center",children:e.name})]}),(0,t.jsxs)("div",{className:"flex flex-row h-6 mb-3",children:[(0,t.jsx)("div",{className:"w-1/2 pl-1 border-b-2",children:"Type: "}),(0,t.jsx)("div",{className:"w-1/2 border-b-2 flex flex-row justify-center",children:e.type})]}),(0,t.jsxs)("div",{className:"flex flex-row h-6 mb-3",children:[(0,t.jsx)("div",{className:"w-1/2 pl-1 border-b-2",children:"Address: "}),(0,t.jsx)("div",{className:"w-1/2 border-b-2 flex flex-row justify-center",children:e.address})]}),(0,t.jsxs)("div",{className:"flex flex-row h-6 mb-3",children:[(0,t.jsx)("div",{className:"w-1/2 pl-1 border-b-2",children:"City: "}),(0,t.jsx)("div",{className:"w-1/2 border-b-2 flex flex-row justify-center",children:e.city})]}),(0,t.jsxs)("div",{className:"flex flex-row h-6 mb-3",children:[(0,t.jsx)("div",{className:"w-1/2 pl-1 border-b-2",children:"County: "}),(0,t.jsx)("div",{className:"w-1/2 border-b-2 flex flex-row justify-center",children:e.county})]}),(0,t.jsxs)("div",{className:"flex flex-row h-6 mb-3",children:[(0,t.jsx)("div",{className:"w-1/2 pl-1 border-b-2",children:"Postcode: "}),(0,t.jsx)("div",{className:"w-1/2 border-b-2 flex flex-row justify-center",children:e.postcode})]})]},e.id));return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"w-full h-full pt-12 overflow-x-auto overflow-y-auto bg-gray-100",children:[(0,t.jsxs)("div",{className:"fixed top-0 left-52 right-0 z-10 bg-gray-200 h-12 border-b-2 border-gray-300 flex flex-row justify-start items-center",children:[(0,t.jsxs)(x(),{href:"/properties",className:"ml-8 hover:text-blue-600 flex flex-row items-center",children:[(0,t.jsx)(h.G,{icon:m.acZ,className:"mr-1 w-3"}),(0,t.jsx)("p",{children:"Return to all Properties"})]}),(0,t.jsxs)("button",{className:"ml-8 hover:text-blue-600 flex flex-row items-center",onClick:()=>[g(!0),k("addEditProperty")],children:[(0,t.jsx)(h.G,{icon:m.TzT,className:"mr-1 w-3"}),"Edit Property"]}),(0,t.jsxs)("button",{className:"ml-8 hover:text-blue-600 flex flex-row items-center",onClick:()=>[g(!0),k("assignUsers")],children:[(0,t.jsx)(h.G,{icon:m.FKd,className:"mr-1 w-3"}),"Assign Users"]})]}),v?(0,t.jsx)(c.Z,{modalType:y,payload:parseInt(p.asPath.split("/")[2]),closeModal:()=>[g(!1),P(),_()]}):null,e?(0,t.jsx)(n.Z,{}):s?(0,t.jsx)("div",{children:"There has been an issue getting the Property Data"}):b?(0,t.jsx)(d.Z,{}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-col xl:flex-row",children:[T,(0,t.jsxs)("div",{className:"ml-10",children:[(0,t.jsx)("p",{className:"xl:text-center text-left mb-2 font-semibold",children:"Assigned Users"}),(0,t.jsx)(u.Z,{config:f,data:S})]})]})})]})})};r.default=b}},function(e){e.O(0,[976,603,879,774,888,179],function(){return e(e.s=309)}),_N_E=e.O()}]);