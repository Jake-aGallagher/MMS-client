(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[59],{6884:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/spares",function(){return t(814)}])},1129:function(e,r,t){"use strict";t.d(r,{Z:function(){return S}});var a=t(5893),s=t(7294),n=t(1664),i=t.n(n),c=t(9603),l=t(9417);let o=(e,r,t)=>(0,a.jsx)(i(),{href:r+t,className:"border-b-2 border-black hover:text-blue-600 hover:border-blue-600",children:e}),d=e=>"00/00/00"===e?"":e,m=e=>(0,a.jsx)("a",{className:"border-b-2 border-black hover:text-blue-600 hover:border-blue-600",href:"https://"+e,target:"_blank",rel:"noreferrer",children:e}),u=e=>1===e?(0,a.jsx)("div",{children:"✔"}):(0,a.jsx)("div",{children:"❌"}),h=e=>1===e?(0,a.jsx)("div",{children:"✔"}):null,x=e=>{switch(e){case 4:return"Admin";case 3:return"Manager";case 2:return"Engineer";default:return"Staff"}},f=(e,r)=>0===e?(0,a.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,a.jsx)(c.G,{icon:l.g82,className:"mr-1 w-5 text-red-600"})," ",e]}):0===r||e/r>1?(0,a.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,a.jsx)(c.G,{icon:l.LEp,className:"mr-1 w-5 text-green-500"})," ",e]}):(0,a.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,a.jsx)(c.G,{icon:l.ik8,className:"mr-1 w-5 text-yellow-500"})," ",e]}),j=(e,r,t,s)=>{if(s)return(0,a.jsx)("div",{className:"flex flex-row justify-center items-center hover:cursor-pointer select-none",onClick:()=>s(e,r,t),children:(0,a.jsx)(c.G,{icon:l.Yai,className:"mr-1 w-5"})})},p=(e,r,t)=>{if(e.length<5){let s=e.map(e=>(0,a.jsx)("li",{children:e.part_no+" / "+e.name+" / Quantity: "+e.quantity},"contentsItem"+e.spare_id));return(0,a.jsx)("ul",{children:s})}if(t)return(0,a.jsx)("button",{onClick:()=>t(e,r),children:"\uD83D\uDD0D"})},g=(e,r,t)=>{if(t)return(0,a.jsx)("div",{className:"flex flex-row justify-center items-center hover:cursor-pointer select-none",onClick:()=>t(e,r),children:(0,a.jsx)(c.G,{icon:l.Yai,className:"mr-1 w-5"})})},b=(e,r,t,s)=>s&&1!=t?(0,a.jsx)("div",{className:"flex flex-row justify-center items-center hover:cursor-pointer select-none",onClick:()=>s(e,r),children:(0,a.jsx)(c.G,{icon:l.Yai,className:"mr-1 w-5"})}):void 0,N=(e,r,t)=>{if(t)return(0,a.jsx)("div",{className:"flex flex-row justify-center items-center hover:cursor-pointer select-none",onClick:()=>t(e,r),children:(0,a.jsx)(c.G,{icon:l.g82,className:"mr-1 w-5 text-red-600"})})},v=(e,r,t,s)=>s&&1!=t?(0,a.jsx)("div",{className:"flex flex-row justify-center items-center hover:cursor-pointer select-none",onClick:()=>s(e,r),children:(0,a.jsx)(c.G,{icon:l.g82,className:"mr-1 w-5 text-red-600"})}):void 0;var y=t(3052);let k=e=>{let r=e=>e.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id+"_searchOption")),t=r=>{e.setSearchType(r.target.value),e.setSearchTerm("")};return(()=>{let s=e.headers.filter(e=>!0===e.search);return(0,a.jsxs)("div",{className:"flex flex-col w-max my-4 ml-10 rounded-sm",children:[(0,a.jsx)("select",{className:"mb-2",value:""!=e.searchType?e.searchType:s[0].name,onChange:t,children:r(s)}),(0,a.jsx)("input",{className:"bg-blue-200 rounded-sm",value:e.searchTerm,onChange:r=>e.setSearchTerm(r.target.value)})]})})()},w=e=>{let r=e.data,[t,n]=(0,s.useState)(),[i,c]=(0,s.useState)(),[l,w]=(0,s.useState)({col:e.config.headers[0].id,dir:"DSC"}),[S,P]=(0,s.useState)(""),[_,C]=(0,s.useState)(""),[T,G]=(0,s.useState)(!0);(0,s.useEffect)(()=>{I(l.col,l.dir)},[]),(0,s.useEffect)(()=>{D()},[_]),(0,s.useEffect)(()=>{I(l.col,l.dir)},[t]);let D=()=>{if(_.length>0){let e=r.filter(e=>e[S].toUpperCase().includes(_.toUpperCase()));n(e)}else n(r)},E=e=>{e===l.col?"DSC"===l.dir?(w({col:l.col,dir:"ASC"}),I(l.col,"ASC")):(w({col:l.col,dir:"DSC"}),I(l.col,"DSC")):(w({col:e,dir:"DSC"}),I(e,"DSC"))},I=(r,a)=>{let s=t||e.data;s.length>0&&("DSC"===a?s.sort((e,t)=>t[r]>e[r]?1:t[r]<e[r]?-1:0):s.sort((e,t)=>e[r]>t[r]?1:e[r]<t[r]?-1:0)),c(s),G(!1)},F=e.config.headers.map(e=>e.order?(0,a.jsx)("th",{className:"border-2 border-solid border-gray-500 px-2 cursor-pointer select-none",onClick:()=>E(e.id),children:(0,a.jsxs)("div",{className:" flex flex-row justify-center items-center",children:[e.name,l.col!=e.id?null:"ASC"===l.dir?(0,a.jsx)("div",{className:"ml-2 text-2xl",children:"↓"}):(0,a.jsx)("div",{className:"ml-2 text-2xl",children:"↑"})]})},"head."+e.id):(0,a.jsx)("th",{className:"border-2 border-solid border-gray-500 px-2 select-none",children:e.name},"head."+e.id)),M=r=>{let t=e.config.headers.map(t=>{let s=null;switch(t.type){case"string":default:s=r[t.id];break;case"link":s=o(r[t.id],e.config.linkColPrefix,r[t.id]);break;case"linkWithName":s=o(r[t.nameParam],e.config.linkColPrefix,r[t.id]);break;case"url":s=m(r[t.id]);break;case"date":s=d(r[t.id]);break;case"authSwitch":s=x(r[t.id]);break;case"completed":s=u(r[t.id]);break;case"arrived":s=h(r[t.id]);break;case"contents":s=p(r[t.id],r[t.functionNamePointer],e.viewTooManyItems);break;case"remaining_stock":s=f(r[t.id],r[t.avgUsagePointer]);break;case"adjust_stock":s=j(r[t.functionIdPointer],r[t.functionNamePointer],r[t.quantRemainPonter],e.adjustStockFunction);break;case"edit":s=g(r[t.functionIdPointer],r[t.functionNamePointer],e.editFunction);break;case"editWithHide":s=b(r[t.functionIdPointer],r[t.functionNamePointer],r[t.hidePointer],e.editFunction);break;case"delete":s=N(r[t.functionIdPointer],r[t.functionNamePointer],e.deleteFunction);break;case"deleteWithHide":s=v(r[t.functionIdPointer],r[t.functionNamePointer],r[t.hidePointer],e.deleteFunction)}return(0,a.jsx)("td",{className:"border border-solid border-gray-500 px-2 text-center p-2",children:s},"cell."+t.id)});return t};return(0,a.jsx)("div",{children:T?(0,a.jsx)(y.Z,{}):(0,a.jsxs)(a.Fragment,{children:[e.config.searchable&&e.config.headers.length>0?(0,a.jsx)(k,{headers:e.config.headers,searchType:S,searchTerm:_,setSearchType:P,setSearchTerm:C}):null,(0,a.jsxs)("table",{className:"min-w-full table-auto border-collapse border-2 border-solid border-gray-500 ",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{className:"bg-gray-200",children:F})}),(0,a.jsx)("tbody",{children:(()=>{if(i&&(null==i?void 0:i.length)>0){let r=i.map(r=>(0,a.jsx)("tr",{children:M(r)},"body"+r[e.config.headers[0].id]));return r}})()})]})]})})};var S=w},814:function(e,r,t){"use strict";t.r(r);var a=t(5893),s=t(7294),n=t(6154),i=t(1819),c=t(3052),l=t(9473),o=t(1664),d=t.n(o),m=t(2879),u=t(9603),h=t(9417),x=t(1129);let f={headers:[{id:"id",name:"Part Number",type:"linkWithName",nameParam:"part_no",search:!0,order:!0},{id:"man_part_no",name:"Manufacturers Part Number",type:"string",search:!0,order:!0},{id:"name",name:"Name",type:"string",search:!0,order:!0},{id:"man_name",name:"Manufacturers Part Name",type:"string",search:!0,order:!0},{id:"location",name:"Location",type:"string",search:!0,order:!0},{id:"quant_remain",name:"Remaining Stock",type:"remaining_stock",search:!0,order:!0,avgUsagePointer:"avg_usage"},{id:"avg_usage",name:"Usage (AVG per Month)",type:"string",search:!0,order:!0},{id:"adjust_stock",name:"Adjust Stock",type:"adjust_stock",search:!1,order:!1,functionIdPointer:"id",functionNamePointer:"name",quantRemainPonter:"quant_remain"},{id:"delete",name:"Delete",type:"delete",search:!1,order:!1,functionIdPointer:"id",functionNamePointer:"name"}],searchable:!0,linkColPrefix:"/spares/"},j=()=>{let[e,r]=(0,s.useState)(!0),[t,o]=(0,s.useState)(!1),j=(0,l.v9)(e=>e.currentProperty.value.currentProperty),[p,g]=(0,s.useState)([]),[b,N]=(0,s.useState)(!1),[v,y]=(0,s.useState)(""),[k,w]=(0,s.useState)({id:0,name:""});(0,s.useEffect)(()=>{S()},[j]);let S=()=>{r(!0),o(!1),P()},P=async()=>{try{let e=await n.Z.get("http://localhost:3001/all-spares/".concat(j),{headers:{Authorisation:"Bearer "+localStorage.getItem("token")}});g(e.data),r(!1)}catch(t){o(!0),r(!1)}},_=(e,r,t)=>{y("adjustSparesStock"),w({id:e,name:r,quantityRemaining:t}),N(!0)},C=(e,r)=>{y("deleteSparesItem"),w({id:e,name:r,quantityRemaining:0}),N(!0)};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"w-full h-full pt-12 overflow-x-auto overflow-y-auto bg-gray-100",children:[(0,a.jsxs)("div",{className:"fixed top-0 left-52 right-0 z-10 bg-gray-200 h-12 border-b-2 border-gray-300 flex flex-row justify-start items-center",children:[(0,a.jsxs)(d(),{href:"/spares/sparesManagement",className:"ml-8 hover:text-blue-600 flex flex-row items-center",children:[(0,a.jsx)(u.G,{icon:h.Yjj,className:"mr-1 w-3"}),"Spares Management"]}),(0,a.jsxs)("button",{onClick:()=>[N(!0),y("addEditSparesItem"),w({id:0,name:""})],className:"ml-8 hover:text-blue-600 flex flex-row items-center",children:[(0,a.jsx)("div",{className:"text-2xl mr-1 pb-1",children:"+"}),"Add Spares Item"]})]}),b?(0,a.jsx)(m.Z,{modalType:v,payload:k,closeModal:()=>[N(!1),w({id:0,name:"",quantityRemaining:0}),y(""),S()]}):null,e?(0,a.jsx)(c.Z,{}):0===p.length?(0,a.jsx)("div",{children:"There is no data"}):t?(0,a.jsx)(i.Z,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex flex-row justify-end ml-8 my-4 items-center",children:(0,a.jsxs)("div",{className:"flex flex-row items-center border-2 border-gray-500 p-1 mr-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)(u.G,{icon:h.LEp,className:"mr-1 w-5 text-green-500"})}),(0,a.jsx)("div",{className:"mr-5 ml-1 text-sm",children:"Greater than 1 Months supply"}),(0,a.jsx)("div",{children:(0,a.jsx)(u.G,{icon:h.ik8,className:"mr-1 w-5 text-yellow-500"})}),(0,a.jsx)("div",{className:"mr-5 ml-1 text-sm",children:"Less than 1 Months supply"}),(0,a.jsx)("div",{children:(0,a.jsx)(u.G,{icon:h.g82,className:"mr-1 w-5 text-red-600"})}),(0,a.jsx)("div",{className:"mr-5 ml-1 text-sm",children:"Nil stock remaining"})]})}),(0,a.jsx)(x.Z,{config:f,data:p,adjustStockFunction:_,deleteFunction:C})]})]})})};r.default=j}},function(e){e.O(0,[976,603,879,774,888,179],function(){return e(e.s=6884)}),_N_E=e.O()}]);