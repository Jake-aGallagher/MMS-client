(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[456],{1983:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/jobs/[jobId]",function(){return l(6523)}])},6523:function(e,s,l){"use strict";l.r(s);var t=l(5893),r=l(6154),i=l(7294),a=l(9473),d=l(1163),n=l(1819),o=l(3052),c=l(2879),x=l(1664),h=l.n(x),j=l(9603),u=l(9417);let m=()=>{let[e,s]=(0,i.useState)(!0),[l,x]=(0,i.useState)(!1),[m,p]=(0,i.useState)(!1),f=(0,d.useRouter)();(0,a.v9)(e=>e.user.value.authority);let[b,v]=(0,i.useState)([]),[w,g]=(0,i.useState)([]),[N,y]=(0,i.useState)(!1),[_,S]=(0,i.useState)(""),[T,C]=(0,i.useState)("");(0,i.useEffect)(()=>{s(!0),p(!1),x(!1),D()},[]);let D=async()=>{try{let e=await r.Z.get("http://localhost:3001/jobs/".concat(f.asPath.split("/")[2]),{headers:{Authorisation:"Bearer "+localStorage.getItem("token")}});0===e.data.jobDetails.length?x(!0):(v(e.data.jobDetails),e.data.timeDetails&&g(e.data.timeDetails)),s(!1)}catch(l){p(!0),s(!1)}},E=b.map(e=>(0,t.jsx)("div",{className:"box row-start-1 row-end-2 col-start-1 col-end-6 pl-6 flex flex-row items-center relative",children:(0,t.jsx)("b",{children:e.property_name})},Math.random())),k=b.map(e=>(0,t.jsxs)("div",{className:"box row-start-2 row-end-5 col-start-1 col-end-4 pl-6 flex flex-col justify-evenly",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Title: "}),e.title]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Job Id: "}),e.id]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Asset: "}),e.asset_name]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Type: "}),e.type]})]},Math.random())),M=b.map(e=>(0,t.jsxs)("div",{className:"box row-start-2 row-end-5 col-start-4 col-end-6 w-full h-full flex flex-col justify-center items-center text-5xl",children:[(0,t.jsx)("p",{className:"text-lg",children:(0,t.jsx)("b",{children:"Completed"})}),1==e.completed?(0,t.jsx)("div",{children:"✔"}):(0,t.jsx)("div",{children:"❌"})]},Math.random())),Z=b.map(e=>(0,t.jsxs)("div",{className:"box row-start-5 row-end-13 col-start-1 col-end-4 p-6 flex flex-col",children:[(0,t.jsxs)("div",{className:"h-[50%] outline outline-blue-600 outline-2 p-2 overflow-y-auto",children:[(0,t.jsx)("p",{children:(0,t.jsx)("b",{children:"Description: "})}),e.description]}),(0,t.jsxs)("div",{className:"h-[50%] outline outline-blue-600 outline-2 p-2 overflow-y-auto",children:[(0,t.jsx)("p",{children:(0,t.jsx)("b",{children:"Notes: "})}),e.notes]})]},Math.random())),R=w.map(e=>(0,t.jsxs)("div",{className:"flex flex-row",children:[(0,t.jsx)("div",{className:"mr-4",children:e.first+" "+e.last}),(0,t.jsxs)("div",{children:[e.time," mins"]})]},e.id+e.last)),G=b.map(e=>(0,t.jsxs)("div",{className:"box row-start-5 row-end-13 col-start-4 col-end-6 pl-6 flex flex-col justify-evenly",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Current Status: "}),e.status]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Urgency: "}),e.urgency]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Date Created: "}),e.created]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Required Completion Date: "}),e.required_comp_date]}),1===e.completed?(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Completion Date: "}),e.comp_date]}):"",(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Reported By: "}),e.reporter]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("b",{children:"Total Time Logged (mins): "}),null===e.logged_time?"none":e.logged_time,R]})]},Math.random()));return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"w-full h-full pt-12 overflow-x-auto overflow-y-auto bg-gray-100",children:[(0,t.jsxs)("div",{className:"fixed top-0 left-52 right-0 z-10 bg-gray-200 h-12 border-b-2 border-gray-300 flex flex-row justify-start items-center",children:[(0,t.jsxs)(h(),{href:"/jobs",className:"ml-8 hover:text-blue-600 flex flex-row items-center",children:[(0,t.jsx)(j.G,{icon:u.acZ,className:"mr-1 w-3"}),(0,t.jsx)("p",{children:"Return to all Jobs"})]}),(0,t.jsxs)("button",{onClick:()=>[y(!0),S("updateJob")],className:"ml-8 hover:text-blue-600 flex flex-row items-center",children:[0==b.length?null:1==b[0].completed?(0,t.jsx)(j.G,{icon:u.TzT,className:"mr-1 w-3"}):(0,t.jsx)(j.G,{icon:u.LEp,className:"mr-1 w-3"}),0==b.length?null:1==b[0].completed?"Update":"Update & Complete"]})]}),e?(0,t.jsx)(o.Z,{}):l?(0,t.jsx)("div",{children:"There is no data"}):m?(0,t.jsx)(n.Z,{}):(0,t.jsxs)(t.Fragment,{children:[N?(0,t.jsx)(c.Z,{modalType:_,payload:b[0].id,closeModal:()=>[y(!1),D()]}):"",(0,t.jsxs)("div",{className:"w-full h-full grid overflow-hidden grid-cols-5 grid-rows-12 gap-0.5",children:[E,k,M,Z,G]})]})]})})};s.default=m}},function(e){e.O(0,[976,603,879,774,888,179],function(){return e(e.s=1983)}),_N_E=e.O()}]);